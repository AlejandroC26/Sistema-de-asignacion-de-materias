(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99556a58"],{"0010":function(t,e,r){},"0ec3":function(t,e,r){"use strict";r("0010")},"39b5":function(t,e,r){"use strict";r("f7db")},d6a1:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"admin-container"},[e("section",{staticClass:"body-info-section"},[e("div",{staticClass:"content-section-info"},[e("Title",{attrs:{title:"Profesores"}}),e("div",{staticClass:"btn-confirm primary",staticStyle:{display:"flex","justify-content":"flex-end"}},[e("button",{on:{click:()=>{t.register=!0,t.update=!1,t.asignatura=!1,t.limpiarFormulario()}}},[t._v(" Nuevo registro ")])]),e("div",{staticStyle:{display:"flex","justify-content":"center",position:"relative"}},[t.register||t.update?e("div",{staticClass:"formulario-registro"},[!1===t.update?e("p",{staticClass:"titulo"},[t._v("Registro de profesor")]):e("p",{staticClass:"titulo"},[t._v("Actualizar profesor")]),e("button",{staticClass:"cross-btn",on:{click:()=>{t.register=!1,t.limpiarFormulario()}}},[t._v(" × ")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",[t._v("Documento")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.documento,expression:"profesor.documento"}],attrs:{type:"number"},domProps:{value:t.profesor.documento},on:{input:function(e){e.target.composing||t.$set(t.profesor,"documento",e.target.value)}}})]),e("div",{staticClass:"col"},[e("p",[t._v("Nombres")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.nombres,expression:"profesor.nombres"}],attrs:{type:"text"},domProps:{value:t.profesor.nombres},on:{input:function(e){e.target.composing||t.$set(t.profesor,"nombres",e.target.value)}}})]),e("div",{staticClass:"col"},[e("p",[t._v("Teléfono")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.telefono,expression:"profesor.telefono"}],attrs:{type:"text"},domProps:{value:t.profesor.telefono},on:{input:function(e){e.target.composing||t.$set(t.profesor,"telefono",e.target.value)}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",[t._v("Dirección")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.direccion,expression:"profesor.direccion"}],attrs:{type:"text"},domProps:{value:t.profesor.direccion},on:{input:function(e){e.target.composing||t.$set(t.profesor,"direccion",e.target.value)}}})]),e("div",{staticClass:"col"},[e("p",[t._v("Ciudad")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.ciudad,expression:"profesor.ciudad"}],attrs:{type:"text"},domProps:{value:t.profesor.ciudad},on:{input:function(e){e.target.composing||t.$set(t.profesor,"ciudad",e.target.value)}}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.email,expression:"profesor.email"}],attrs:{type:"text"},domProps:{value:t.profesor.email},on:{input:function(e){e.target.composing||t.$set(t.profesor,"email",e.target.value)}}})]),!1===t.update?e("div",{staticClass:"col"},[e("p",[t._v("Contraseña")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.profesor.password,expression:"profesor.password"}],attrs:{type:"number"},domProps:{value:t.profesor.password},on:{input:function(e){e.target.composing||t.$set(t.profesor,"password",e.target.value)}}})]):t._e()]),!1===t.update?e("div",{staticClass:"btn-confirm"},[e("button",{on:{click:function(e){return t.registrarProfesor(t.profesor)}}},[t._v("Registrar")])]):e("div",{staticClass:"btn-confirm"},[e("button",{on:{click:function(e){return t.actualizarProfesor(t.profesor)}}},[t._v("Guardar")])])]):t._e()]),e("div",{staticStyle:{display:"flex","justify-content":"center",position:"relative"}},[t.asignatura?e("div",{staticClass:"formulario-registro"},[e("p",{staticClass:"titulo"},[t._v("ASIGNAR MATERIAS")]),e("button",{staticClass:"cross-btn",on:{click:function(e){t.asignatura=!1}}},[t._v("×")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("p",[e("b",[t._v("Nombre:")]),t._v(" "+t._s(t.profesor.nombres))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col",staticStyle:{display:"flex"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.id_asignatura,expression:"id_asignatura"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.id_asignatura=e.target.multiple?r:r[0]}}},t._l(t.asignaturas,(function(r){return e("option",{key:r.id,domProps:{value:r.id,innerHTML:t._s(r.nombre)}})})),0),e("button",{staticStyle:{padding:"0.3rem 0.5rem","box-shadow":"0 0 1px #000000",border:"none",cursor:"pointer"},on:{click:function(e){return t.registrarAsignatura()}}},[t._v(" Agregar ")])])]),t._m(0),t.cursos.length>0?e("div",t._l(t.cursos,(function(r){return e("div",{key:r.id_ap,staticClass:"row-asignatura"},[e("div",[t._v(" Nombre: "+t._s(r.nombre_asignatura)+" "),e("br"),t._v(" Creditos: "+t._s(r.creditos)+" ")]),e("div",[e("span",{class:"activo"!==r.estado?"span-activo":"span-inactivo"},[t._v(t._s(r.estado))])]),e("div",[e("FormToggleSlider",{attrs:{value:"activo"===r.estado},on:{updateValor:function(e){return t.onUpdateEstado({value:e,id:r.id_ap})}}})],1)])})),0):e("div",{staticStyle:{margin:"1rem 1.2rem"}},[t._v(" No hay asignaturas asignadas ")])]):t._e()]),e("table",{staticClass:"styled-table"},[t._m(1),e("tbody",t._l(t.profesores,(function(r){return e("tr",{key:r.id},[e("td",[t._v(t._s(r.documento))]),e("td",[t._v(t._s(r.nombres))]),e("td",[t._v(t._s(r.telefono))]),e("td",[t._v(t._s(r.email))]),e("td",[t._v(t._s(r.direccion))]),e("td",[t._v(t._s(r.ciudad))]),e("td",[e("div",{staticStyle:{display:"flex",gap:"0.5rem"}},[e("span",{staticClass:"link",on:{click:()=>{t.update=!0,t.register=!1,t.asignatura=!1,t.cargarProfesor(r)}}},[t._v("Editar")]),e("span",{staticClass:"link red",on:{click:()=>{t.update=!1,t.register=!1,t.asignatura=!0,t.cargarProfesor(r),t.listarAsignaturasProfesor(r.id)}}},[t._v("Asignaturas")])])])])})),0)]),e("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e("div",{staticClass:"pagination"},t._l(t.links,(function(r){return e("a",{key:t.generateUUID(r),class:{active:r.active},attrs:{href:"#"},on:{click:function(e){return t.listarProfesores(r.url)}}},[e("span",{domProps:{innerHTML:t._s(r.label)}})])})),0)])],1)])]),e("Footer")],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row",staticStyle:{"margin-top":"0.5rem"}},[e("div",{staticClass:"col"},[e("p",[e("b",[t._v("ASIGNATURAS")])])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("Documento")]),e("td",[t._v("Nombres")]),e("td",[t._v("Teléfono")]),e("td",[t._v("Email")]),e("td",[t._v("Dirección")]),e("td",[t._v("Ciudad")]),e("td",[t._v("Acción")])])])}],a=r("bc3a"),i=r.n(a),n=r("2f62"),l=r("5407"),c=r("dc36"),d=r("5619"),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("label",{staticClass:"switch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.valor,expression:"valor"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.valor)?t._i(t.valor,null)>-1:t.valor},on:{change:function(e){var r=t.valor,o=e.target,s=!!o.checked;if(Array.isArray(r)){var a=null,i=t._i(r,a);o.checked?i<0&&(t.valor=r.concat([a])):i>-1&&(t.valor=r.slice(0,i).concat(r.slice(i+1)))}else t.valor=s}}}),e("div",{staticClass:"slider round"})])])},p=[],f={name:"FormToggleSlider",data(){return{valor:""}},props:{value:{}},watch:{valor(t){this.$emit("updateValor",t)}},mounted(){this.valor=this.value}},m=f,v=(r("39b5"),r("0c7c")),g=Object(v["a"])(m,u,p,!1,null,"32a55930",null),h=g.exports,_={name:"Dashboard",components:{Header:l["a"],Footer:c["a"],Title:d["a"],FormToggleSlider:h},data:function(){return{register:!1,update:!1,asignatura:!1,id_asignatura:"",links:[],profesores:[],asignaturas:[],cursos:[],profesor:{id:"",documento:"123",nombres:"Alejandro",telefono:"313",email:"cubillosalejandro122@gmail.com",direccion:"Cra 16",ciudad:"Pitalito",password:"123",id_profesor:""}}},methods:{onUpdateEstado({value:t,id:e}){let r={estado:t?"activo":"inactivo"};i.a.post(`http://127.0.0.1:8000/api/profesor/course/${e}/update`,r,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>{this.listarAsignaturasProfesor(this.profesor.id_profesor)})},isValidText(t){var e=new RegExp("^[a-zA-ZÀ-ÿ ]+$"),r=t;return!!e.test(r)},isValidEmail(t){let e=/^(?:[^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*|"[^\n"]+")@(?:[^<>()[\].,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,63}$/i;return!!e.test(t)},generateUUID(){var t=(new Date).getTime(),e="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?r:3&r|8).toString(16)}));return e},launchAlert(t){t.timeout||(t.timeout=2500);const e=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:t.timeout});e.fire({icon:t.type,title:t.title,text:t.message})},listarProfesores(t){t||(t="http://127.0.0.1:8000/api/profesor"),i.a.get(t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:t})=>{this.links=t.links,this.profesores=t.data}).catch(t=>console.log(t.response))},listarAsignaturas(){i.a.get("http://127.0.0.1:8000/api/asignatura",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:t})=>{this.id_asignatura=t.data[0].id,this.asignaturas=t.data}).catch(t=>{console.log(t.response)})},listarAsignaturasProfesor(t){i.a.get(`http://127.0.0.1:8000/api/profesor/${t}/courses`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:t})=>{this.cursos=t}).catch(t=>console.log(t.response))},cargarProfesor(t){this.profesor.id=t.id_user,this.profesor.documento=t.documento,this.profesor.nombres=t.nombres,this.profesor.telefono=t.telefono,this.profesor.email=t.email,this.profesor.direccion=t.direccion,this.profesor.ciudad=t.ciudad,this.profesor.password=t.password,this.profesor.id_profesor=t.id},limpiarFormulario(){this.update=!1,this.profesor.id="",this.profesor.documento="",this.profesor.nombres="",this.profesor.telefono="",this.profesor.email="",this.profesor.direccion="",this.profesor.ciudad="",this.profesor.password="",this.profesor.id_profesor=""},async registrarProfesor(t){if(!this.isValidText(t.nombres))return this.launchAlert({type:"warning",title:"¡El nombre no puede contener carácteres especiales!"});if(!this.isValidEmail(t.email))return this.launchAlert({type:"warning",title:"¡El correo no es válido!"});try{let e=await i.a.post("http://127.0.0.1:8000/api/user/register",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});i.a.post("http://127.0.0.1:8000/api/profesor/register",{id_user:e.data.data.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>(this.register=!1,this.limpiarFormulario(),this.listarProfesores(),this.launchAlert({type:"success",title:"¡Profesor registrado!"}))).catch(t=>{console.log(t.response)})}catch(e){console.log(e.response)}},async actualizarProfesor(t){if(!this.isValidText(t.nombres))return this.launchAlert({type:"warning",title:"¡El nombre no puede contener carácteres especiales!"});if(!this.isValidEmail(t.email))return this.launchAlert({type:"warning",title:"¡El correo no es válido!"});try{return await i.a.post("http://127.0.0.1:8000/api/user/update/"+t.id,t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),this.listarProfesores(),this.limpiarFormulario(),this.launchAlert({type:"success",title:"¡Profesor actualizado!"})}catch(e){console.log(e.response)}},async registrarAsignatura(){i.a.post("http://127.0.0.1:8000/api/profesor/course/assign",{id_profesor:this.profesor.id_profesor,id_asignatura:this.id_asignatura},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>(this.id_asignatura=this.asignaturas[0].id,this.listarAsignaturasProfesor(this.profesor.id_profesor),this.launchAlert({type:"success",title:"¡Materia asignada exitosamente!"}))).catch(t=>console.log(t.response))}},computed:{...Object(n["d"])(["sessionUser"])},mounted(){this.listarProfesores(),this.listarAsignaturas()}},x=_,b=(r("0ec3"),Object(v["a"])(x,o,s,!1,null,"d187c132",null));e["default"]=b.exports},f7db:function(t,e,r){}}]);
//# sourceMappingURL=chunk-99556a58.596229a1.js.map
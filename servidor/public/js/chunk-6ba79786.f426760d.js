(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ba79786"],{"143b":function(e,t,r){"use strict";r("258f")},"258f":function(e,t,r){},d6a1:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("Header"),t("div",{staticClass:"admin-container"},[t("section",{staticClass:"body-info-section"},[t("div",{staticClass:"content-section-info"},[t("Title",{attrs:{title:"Profesores"}}),t("div",{staticClass:"btn-confirm primary",staticStyle:{display:"flex","justify-content":"flex-end"}},[t("button",{on:{click:()=>{e.register=!0,e.update=!1,e.asignatura=!1,e.limpiarFormulario()}}},[e._v("Nuevo registro")])]),t("div",{staticStyle:{display:"flex","justify-content":"center",position:"relative"}},[e.register||e.update?t("div",{staticClass:"formulario-registro"},[!1===e.update?t("p",{staticClass:"titulo"},[e._v("Registro de profesor")]):t("p",{staticClass:"titulo"},[e._v("Actualizar profesor")]),t("button",{staticClass:"cross-btn",on:{click:()=>{e.register=!1,e.limpiarFormulario()}}},[e._v("×")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("p",[e._v("Documento")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.documento,expression:"profesor.documento"}],attrs:{type:"number"},domProps:{value:e.profesor.documento},on:{input:function(t){t.target.composing||e.$set(e.profesor,"documento",t.target.value)}}})]),t("div",{staticClass:"col"},[t("p",[e._v("Nombres")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.nombres,expression:"profesor.nombres"}],attrs:{type:"text"},domProps:{value:e.profesor.nombres},on:{input:function(t){t.target.composing||e.$set(e.profesor,"nombres",t.target.value)}}})]),t("div",{staticClass:"col"},[t("p",[e._v("Teléfono")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.telefono,expression:"profesor.telefono"}],attrs:{type:"text"},domProps:{value:e.profesor.telefono},on:{input:function(t){t.target.composing||e.$set(e.profesor,"telefono",t.target.value)}}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("p",[e._v("Dirección")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.direccion,expression:"profesor.direccion"}],attrs:{type:"text"},domProps:{value:e.profesor.direccion},on:{input:function(t){t.target.composing||e.$set(e.profesor,"direccion",t.target.value)}}})]),t("div",{staticClass:"col"},[t("p",[e._v("Ciudad")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.ciudad,expression:"profesor.ciudad"}],attrs:{type:"text"},domProps:{value:e.profesor.ciudad},on:{input:function(t){t.target.composing||e.$set(e.profesor,"ciudad",t.target.value)}}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("p",[e._v("Email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.email,expression:"profesor.email"}],attrs:{type:"text"},domProps:{value:e.profesor.email},on:{input:function(t){t.target.composing||e.$set(e.profesor,"email",t.target.value)}}})]),!1===e.update?t("div",{staticClass:"col"},[t("p",[e._v("Contraseña")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.profesor.password,expression:"profesor.password"}],attrs:{type:"number"},domProps:{value:e.profesor.password},on:{input:function(t){t.target.composing||e.$set(e.profesor,"password",t.target.value)}}})]):e._e()]),!1===e.update?t("div",{staticClass:"btn-confirm"},[t("button",{on:{click:function(t){return e.registrarProfesor(e.profesor)}}},[e._v(" Registrar ")])]):t("div",{staticClass:"btn-confirm"},[t("button",{on:{click:function(t){return e.actualizarProfesor(e.profesor)}}},[e._v(" Guardar ")])])]):e._e()]),t("div",{staticStyle:{display:"flex","justify-content":"center",position:"relative"}},[e.asignatura?t("div",{staticClass:"formulario-registro"},[t("p",{staticClass:"titulo"},[e._v("ASIGNAR MATERIAS")]),t("button",{staticClass:"cross-btn",on:{click:function(t){e.asignatura=!1}}},[e._v("×")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("p",[t("b",[e._v("Nombre:")]),e._v(" "+e._s(e.profesor.nombres))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col",staticStyle:{display:"flex"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.id_asignatura,expression:"id_asignatura"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.id_asignatura=t.target.multiple?r:r[0]}}},e._l(e.asignaturas,(function(r){return t("option",{key:r.id,domProps:{value:r.id,innerHTML:e._s(r.nombre)}})})),0),t("button",{staticStyle:{padding:"0.3rem 0.5rem","box-shadow":"0 0 1px #000000",border:"none",cursor:"pointer"},on:{click:function(t){return e.registrarAsignatura()}}},[e._v("Agregar")])])]),e._m(0),e.cursos.length>0?t("div",e._l(e.cursos,(function(r){return t("div",{key:r.id,staticStyle:{margin:"1rem 1.2rem"}},[e._v(" Nombre: "+e._s(r.nombre_asignatura)+" "),t("br"),e._v(" Creditos: "+e._s(r.creditos)+" "),t("hr")])})),0):t("div",{staticStyle:{margin:"1rem 1.2rem"}},[e._v("No hay asignaturas asignadas")])]):e._e()]),t("table",{staticClass:"styled-table"},[e._m(1),t("tbody",e._l(e.profesores,(function(r){return t("tr",{key:r.id},[t("td",[e._v(e._s(r.documento))]),t("td",[e._v(e._s(r.nombres))]),t("td",[e._v(e._s(r.telefono))]),t("td",[e._v(e._s(r.email))]),t("td",[e._v(e._s(r.direccion))]),t("td",[e._v(e._s(r.ciudad))]),t("td",[t("div",{staticStyle:{display:"flex",gap:".5rem"}},[t("span",{staticClass:"link",on:{click:()=>{e.update=!0,e.register=!1,e.asignatura=!1,e.cargarProfesor(r)}}},[e._v("Editar")]),t("span",{staticClass:"link red",on:{click:()=>{e.update=!1,e.register=!1,e.asignatura=!0,e.cargarProfesor(r),e.listarAsignaturasProfesor(r.id)}}},[e._v("Asignaturas")])])])])})),0)]),t("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("div",{staticClass:"pagination"},e._l(e.links,(function(r){return t("a",{key:e.generateUUID(r),class:{active:r.active},attrs:{href:"#"},on:{click:function(t){return e.listarProfesores(r.url)}}},[t("span",{domProps:{innerHTML:e._s(r.label)}})])})),0)])],1)])]),t("Footer")],1)},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",staticStyle:{"margin-top":".5rem"}},[t("div",{staticClass:"col"},[t("p",[t("b",[e._v("ASIGNATURAS")])])])])},function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("td",[e._v("Documento")]),t("td",[e._v("Nombres")]),t("td",[e._v("Teléfono")]),t("td",[e._v("Email")]),t("td",[e._v("Dirección")]),t("td",[e._v("Ciudad")]),t("td",[e._v("Acción")])])])}],a=r("5407"),i=r("dc36"),n=r("5619"),l=r("2f62"),c=r("bc3a"),d=r.n(c),u={name:"Dashboard",components:{Header:a["a"],Footer:i["a"],Title:n["a"]},data:function(){return{register:!1,update:!1,asignatura:!1,id_asignatura:"",links:[],profesores:[],asignaturas:[],cursos:[],profesor:{id:"",documento:"123",nombres:"Alejandro",telefono:"313",email:"cubillosalejandro122@gmail.com",direccion:"Cra 16",ciudad:"Pitalito",password:"123",id_profesor:""}}},methods:{isValidText(e){var t=new RegExp("^[a-zA-ZÀ-ÿ ]+$"),r=e;return!!t.test(r)},isValidEmail(e){let t=/^(?:[^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*|"[^\n"]+")@(?:[^<>()[\].,;:\s@"]+\.)+[^<>()[\]\.,;:\s@"]{2,63}$/i;return!!t.test(e)},generateUUID(){var e=(new Date).getTime(),t="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}));return t},launchAlert(e){e.timeout||(e.timeout=2500);const t=this.$swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:e.timeout});t.fire({icon:e.type,title:e.title,text:e.message})},listarProfesores(e){e||(e="/api/profesor"),d.a.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:e})=>{this.links=e.links,this.profesores=e.data}).catch(e=>console.log(e.response))},listarAsignaturas(){d.a.get("/api/asignatura",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:e})=>{this.id_asignatura=e.data[0].id,this.asignaturas=e.data}).catch(e=>{console.log(e.response)})},listarAsignaturasProfesor(e){d.a.get(`/api/profesor/${e}/courses`,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(({data:e})=>{this.cursos=e}).catch(e=>console.log(e.response))},cargarProfesor(e){this.profesor.id=e.id_user,this.profesor.documento=e.documento,this.profesor.nombres=e.nombres,this.profesor.telefono=e.telefono,this.profesor.email=e.email,this.profesor.direccion=e.direccion,this.profesor.ciudad=e.ciudad,this.profesor.password=e.password,this.profesor.id_profesor=e.id},limpiarFormulario(){this.update=!1,this.profesor.id="",this.profesor.documento="",this.profesor.nombres="",this.profesor.telefono="",this.profesor.email="",this.profesor.direccion="",this.profesor.ciudad="",this.profesor.password="",this.profesor.id_profesor=""},async registrarProfesor(e){if(!this.isValidText(e.nombres))return this.launchAlert({type:"warning",title:"¡El nombre no puede contener carácteres especiales!"});if(!this.isValidEmail(e.email))return this.launchAlert({type:"warning",title:"¡El correo no es válido!"});try{let t=await d.a.post("/api/user/register",e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}});d.a.post("/api/profesor/register",{id_user:t.data.data.id},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>(this.register=!1,this.limpiarFormulario(),this.listarProfesores(),this.launchAlert({type:"success",title:"¡Profesor registrado!"}))).catch(e=>{console.log(e.response)})}catch(t){console.log(t.response)}},async actualizarProfesor(e){if(!this.isValidText(e.nombres))return this.launchAlert({type:"warning",title:"¡El nombre no puede contener carácteres especiales!"});if(!this.isValidEmail(e.email))return this.launchAlert({type:"warning",title:"¡El correo no es válido!"});try{return await d.a.post("/api/user/update/"+e.id,e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),this.listarProfesores(),this.limpiarFormulario(),this.launchAlert({type:"success",title:"¡Profesor actualizado!"})}catch(t){console.log(t.response)}},async registrarAsignatura(){d.a.post("/api/profesor/course/assign",{id_profesor:this.profesor.id_profesor,id_asignatura:this.id_asignatura},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(()=>(this.id_asignatura=this.asignaturas[0].id,this.listarAsignaturasProfesor(this.profesor.id_profesor),this.launchAlert({type:"success",title:"¡Materia asignada exitosamente!"}))).catch(e=>console.log(e.response))}},computed:{...Object(l["d"])(["sessionUser"])},mounted(){this.listarProfesores(),this.listarAsignaturas()}},p=u,f=(r("143b"),r("0c7c")),m=Object(f["a"])(p,s,o,!1,null,"d9308e4c",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-6ba79786.f426760d.js.map